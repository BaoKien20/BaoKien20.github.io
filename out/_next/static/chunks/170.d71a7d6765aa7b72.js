"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[170],{703:function(e,t,r){r.d(t,{default:function(){return n.a}});var a=r(7447),n=r.n(a)},7447:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getImageProps:function(){return i},default:function(){return s}});let a=r(6921),n=r(8630),l=r(1749),o=a._(r(536)),i=e=>{let{props:t}=(0,n.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}},s=l.Image},3170:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var a=r(7437),n=r(9638),l=r(2265),o=r(703),i=r(1021),s=e=>{let{value:t,onClick:r}=e;return(0,a.jsxs)(i.Link,{href:"/phim/"+t.slug,className:"group flex hover:bg-white/10  cursor-pointer items-start gap-2 rounded-lg p-2 select-none ",children:[(0,a.jsx)("div",{className:"relative h-14 w-14",children:(0,a.jsx)(o.default,{sizes:"56px",blurDataURL:t.blurImage,placeholder:t.blurImage?"blur":"empty",src:"https://img.ophim.live/uploads/movies/"+t.thumb_url,alt:t.slug,fill:!0,className:"object-cover rounded"})}),(0,a.jsxs)("div",{className:"text-sm flex flex-col gap-2 text-white",children:[(0,a.jsx)("p",{className:"leading-3",children:t.name}),(0,a.jsx)("p",{className:"text-title text-xs leading-3",children:t.origin_name}),(0,a.jsx)("p",{className:"text-title text-xs leading-3",children:t.episode_current})]})]})},u=r(2746),c=r(6540),d=r(3161),g=r(7720);function m(){let[e,t]=(0,l.useState)(""),r=function(e,t){let[r,a]=l.useState(e);return l.useEffect(()=>{let r=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(r)}},[e,t]),r}(e,500),[o,s]=(0,l.useState)(!1),m=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let a=t=>{r.current&&!r.current.contains(t.target)&&e()};return document.addEventListener("click",a,t),()=>document.removeEventListener("click",a,t)},[e,t]),r}(()=>{s(!1)},!0),{data:y,isLoading:v}=(0,c.a)({queryKey:["search-movie",r],queryFn:async()=>(0,u.ez)(e,5),refetchOnWindowFocus:!1,enabled:r.length>0});return(0,a.jsxs)("div",{className:"relative w-full h-fit ",ref:m,children:[(0,a.jsx)(g.Z,{onChange:e=>t(e.target.value),onClick:()=>s(!0),ariaLabel:"Search",className:"w-full ml-auto border rounded focus:outline-none  border-des  bg-black h-9  text-sm text-title",icon:(0,a.jsx)(d.W1,{fill:"currentColor",className:"text-white/60 group-hover:text-white cursor-pointer absolute right-2 top-1/2 transform -translate-y-1/2"})}),(0,a.jsx)(n.u,{show:o&&e.length>0,leave:"transition linear duration-500",enter:"transition linear duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsxs)("div",{className:" absolute left-0 w-full h-fit mt-3 top-[100%] cursor-default rounded border  border-white/5 bg-mainBackground/95 p-1 ",children:[(0,a.jsxs)("div",{className:"w-full flex p-3 py-2 justify-between items-center",children:[(0,a.jsx)(i.Link,{href:e?"/tim-kiem?key=".concat(e):"/tim-kiem",className:"text-title text-sm hover:text-mainColor",children:"Đến trang t\xecm kiếm"}),(0,a.jsx)(d.b0,{className:"cursor-pointer",onClick:()=>s(!1)})]}),(0,a.jsx)(h,{query:e,movies:y,isLoading:v})]})})]})}let h=e=>{let{movies:t,isLoading:r,query:n}=e;return r?(0,a.jsx)(d.Ho,{className:"mx-auto animate-spin"}):t&&0===t.length?(0,a.jsx)("div",{className:" p-3 text-title text-xs text-center",children:"Kh\xf4ng t\xecm thấy phim theo từ kh\xf3a"}):null==t?void 0:t.map(e=>(0,a.jsx)(s,{value:e},e._id))}},2746:function(e,t,r){r.d(t,{nm:function(){return c},b:function(){return u},_4:function(){return d},yx:function(){return s},Rv:function(){return g},ez:function(){return i}});var a=r(2265),n=r(3107),l=r(3916);class o{}async function i(e,t){return 0===e.length?null:await o.searchKMovie(e,t)}async function s(e,t,r){return await o.getMovieBySlugArray(e,t,r)}async function u(e,t){return e&&0!==e.length?await o.getEpisodeHistory(e,t):null}async function c(e,t,r){return await o.addEpisodeHistory(e,t,r)}async function d(e,t,r){return r&&0!==r.length?await o.getHistoryKMovie(e,t,r):null}async function g(e){return e&&(null==e?void 0:e.length)!==0?await o.getViewedMovie(e):null}o.searchKMovie=(0,a.cache)(async(e,t)=>{let r="".concat(l.v,"/movies/Search");try{return(await (0,n.Z)({method:"get",url:r,params:{value:e,limit:t}})).data}catch(e){console.log(e)}}),o.getKMovie=(0,a.cache)(async(e,t,r)=>{let a=l.v+"/movies";try{return(await (0,n.Z)({method:"get",url:a,params:{page:e,pageSize:t,search:null!=r?r:""}})).data}catch(e){console.log(e)}}),o.getMovieBySlug=(0,a.cache)(async e=>{let t=l.Z+e;try{return(await (0,n.Z)({method:"get",url:t})).data}catch(e){console.log(e)}}),o.getFilterMovie=(0,a.cache)(async(e,t,r,a,o,i,s,u)=>{var c;let d={page:e,pageSize:t,sort:null!=r?r:null,type:null!=a?a:null,status:null!=s?s:null,year:null!=o?o:null,categories:null!==(c=null==i?void 0:i.split(" "))&&void 0!==c?c:null,country:null!=u?u:null},g=l.v+"/movies/FilterMovie";try{return(await (0,n.Z)({method:"get",url:g,params:d})).data}catch(e){console.log(e)}}),o.getCountryMovies=(0,a.cache)(async(e,t,r)=>{let a=l.v+"/movies/Country";try{return(await (0,n.Z)({method:"get",url:a,params:{page:e,pageSize:t,country:r}})).data}catch(e){console.log("error",e);return}}),o.getCategoryMovies=(0,a.cache)(async(e,t,r)=>{let a=l.v+"/movies/Category";try{return(await (0,n.Z)({method:"get",url:a,params:{page:e,pageSize:t,category:r}})).data}catch(e){console.log("error",e);return}}),o.getYearMovies=(0,a.cache)(async(e,t,r)=>{let a=l.v+"/movies/Year";try{return(await (0,n.Z)({method:"get",url:a,params:{page:e,pageSize:t,year:r}})).data}catch(e){console.log("error",e);return}}),o.getMovieBySlugArray=(0,a.cache)(async(e,t,r)=>{let a=l.v+"/movies/getMoviesBySlug";try{return(await (0,n.Z)({method:"get",url:a,params:{page:e,pageSize:t,slugs:r}})).data}catch(e){console.log("error",e);return}}),o.getEpisodeHistory=async(e,t)=>{let r=l.v+"/history/getEpisodeHistory";try{return(await (0,n.Z)({method:"get",url:r,params:{userId:e,movieSlug:t}})).data}catch(e){console.log("error",e);return}},o.addEpisodeHistory=async(e,t,r)=>{let a=l.v+"/history/addEpisodeHistory";try{return(await (0,n.Z)({method:"post",url:a,data:{userId:e,movieSlug:t,episodeSlug:r}})).data}catch(e){console.log("error",e);return}},o.getHistoryKMovie=async(e,t,r)=>{let a=l.v+"/history/getHistory";try{return(await (0,n.Z)({method:"get",url:a,params:{page:e,pageSize:t,userId:r}})).data}catch(e){console.log("error",e);return}},o.getViewedMovie=async e=>{let t=l.v+"/history/getViewedMovie";try{return(await (0,n.Z)({method:"get",url:t,params:{userId:e}})).data}catch(e){console.log("error",e);return}}}}]);