(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[933],{6049:function(e,t,n){Promise.resolve().then(n.bind(n,4732)),Promise.resolve().then(n.bind(n,2758))},3161:function(e,t,n){"use strict";n.d(t,{Ho:function(){return d},Pz:function(){return m},R0:function(){return o},Uq:function(){return u},W1:function(){return i},b0:function(){return c},lM:function(){return h},pl:function(){return r},vV:function(){return g},wX:function(){return l}});var a=n(7437),s=n(1065);n(2265);let r=e=>{var t,n;return(0,a.jsx)("svg",{className:e.className,width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:null!==(t=e.fill)&&void 0!==t?t:"#cac9c9",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",stroke:null!==(n=e.fill)&&void 0!==n?n:"#cac9c9",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"})})},l=e=>(0,a.jsx)("svg",{className:e.className,height:20,width:20,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15M12 9l3 3m0 0-3 3m3-3H2.25"})}),o=e=>{var t;return(0,a.jsx)("svg",{className:e.className,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M17 16L21 12M21 12L17 8M21 12L7 12M13 16V17C13 18.6569 11.6569 20 10 20H6C4.34315 20 3 18.6569 3 17V7C3 5.34315 4.34315 4 6 4H10C11.6569 4 13 5.34315 13 7V8",stroke:null!==(t=e.fill)&&void 0!==t?t:"#cac9c9",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})},i=e=>{var t;return(0,a.jsx)("svg",{className:e.className,onClick:e.onClick,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z",stroke:null!==(t=e.fill)&&void 0!==t?t:"#cac9c9",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})},c=e=>{var t;return(0,a.jsx)("svg",{className:e.className,onClick:e.onClick,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M6 18L18 6M6 6L18 18",stroke:null!==(t=e.fill)&&void 0!==t?t:"#cac9c9",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})},d=e=>{var t,n,s;return(0,a.jsx)("svg",{className:e.className+" animate-spin",width:null!==(t=e.size)&&void 0!==t?t:"24",height:null!==(n=e.size)&&void 0!==n?n:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M12.75 3V6C12.75 6.19891 12.671 6.38968 12.5303 6.53033C12.3897 6.67098 12.1989 6.75 12 6.75C11.8011 6.75 11.6103 6.67098 11.4697 6.53033C11.329 6.38968 11.25 6.19891 11.25 6V3C11.25 2.80109 11.329 2.61032 11.4697 2.46967C11.6103 2.32902 11.8011 2.25 12 2.25C12.1989 2.25 12.3897 2.32902 12.5303 2.46967C12.671 2.61032 12.75 2.80109 12.75 3ZM21 11.25H18C17.8011 11.25 17.6103 11.329 17.4697 11.4697C17.329 11.6103 17.25 11.8011 17.25 12C17.25 12.1989 17.329 12.3897 17.4697 12.5303C17.6103 12.671 17.8011 12.75 18 12.75H21C21.1989 12.75 21.3897 12.671 21.5303 12.5303C21.671 12.3897 21.75 12.1989 21.75 12C21.75 11.8011 21.671 11.6103 21.5303 11.4697C21.3897 11.329 21.1989 11.25 21 11.25ZM16.7728 15.7125C16.631 15.5778 16.4422 15.5038 16.2466 15.5063C16.0511 15.5088 15.8642 15.5876 15.7259 15.7259C15.5876 15.8642 15.5088 16.0511 15.5063 16.2466C15.5038 16.4422 15.5778 16.631 15.7125 16.7728L17.8331 18.8944C17.9739 19.0351 18.1647 19.1142 18.3638 19.1142C18.5628 19.1142 18.7536 19.0351 18.8944 18.8944C19.0351 18.7536 19.1142 18.5628 19.1142 18.3638C19.1142 18.1647 19.0351 17.9739 18.8944 17.8331L16.7728 15.7125ZM12 17.25C11.8011 17.25 11.6103 17.329 11.4697 17.4697C11.329 17.6103 11.25 17.8011 11.25 18V21C11.25 21.1989 11.329 21.3897 11.4697 21.5303C11.6103 21.671 11.8011 21.75 12 21.75C12.1989 21.75 12.3897 21.671 12.5303 21.5303C12.671 21.3897 12.75 21.1989 12.75 21V18C12.75 17.8011 12.671 17.6103 12.5303 17.4697C12.3897 17.329 12.1989 17.25 12 17.25ZM7.22719 15.7125L5.10562 17.8331C4.96489 17.9739 4.88583 18.1647 4.88583 18.3638C4.88583 18.5628 4.96489 18.7536 5.10562 18.8944C5.24636 19.0351 5.43723 19.1142 5.63625 19.1142C5.83527 19.1142 6.02614 19.0351 6.16687 18.8944L8.2875 16.7728C8.42221 16.631 8.49621 16.4422 8.4937 16.2466C8.4912 16.0511 8.4124 15.8642 8.2741 15.7259C8.1358 15.5876 7.94894 15.5088 7.75337 15.5063C7.5578 15.5038 7.36898 15.5778 7.22719 15.7125ZM6.75 12C6.75 11.8011 6.67098 11.6103 6.53033 11.4697C6.38968 11.329 6.19891 11.25 6 11.25H3C2.80109 11.25 2.61032 11.329 2.46967 11.4697C2.32902 11.6103 2.25 11.8011 2.25 12C2.25 12.1989 2.32902 12.3897 2.46967 12.5303C2.61032 12.671 2.80109 12.75 3 12.75H6C6.19891 12.75 6.38968 12.671 6.53033 12.5303C6.67098 12.3897 6.75 12.1989 6.75 12ZM6.16687 5.10562C6.02614 4.96489 5.83527 4.88583 5.63625 4.88583C5.43723 4.88583 5.24636 4.96489 5.10562 5.10562C4.96489 5.24636 4.88583 5.43723 4.88583 5.63625C4.88583 5.83527 4.96489 6.02614 5.10562 6.16687L7.22719 8.2875C7.36898 8.42221 7.5578 8.49621 7.75337 8.4937C7.94894 8.4912 8.1358 8.4124 8.2741 8.2741C8.4124 8.1358 8.4912 7.94894 8.4937 7.75337C8.49621 7.5578 8.42221 7.36898 8.2875 7.22719L6.16687 5.10562Z",fill:null!==(s=e.fill)&&void 0!==s?s:"white"})})},u=e=>(0,a.jsxs)("svg",{className:(0,s.cn)("bars mx-auto",e.className),viewBox:"0 0 100 100",onClick:e.onClick,children:[(0,a.jsx)("path",{className:"line top",d:"m 30,33 h 40 c 13.100415,0 14.380204,31.80258 6.899646,33.421777 -24.612039,5.327373 9.016154,-52.337577 -12.75751,-30.563913 l -28.284272,28.284272"}),(0,a.jsx)("path",{className:"line middle",d:"m 70,50 c 0,0 -32.213436,0 -40,0 -7.786564,0 -6.428571,-4.640244 -6.428571,-8.571429 0,-5.895471 6.073743,-11.783399 12.286435,-5.570707 6.212692,6.212692 28.284272,28.284272 28.284272,28.284272"}),(0,a.jsx)("path",{className:"line bottom",d:"m 69.575405,67.073826 h -40 c -13.100415,0 -14.380204,-31.80258 -6.899646,-33.421777 24.612039,-5.327373 -9.016154,52.337577 12.75751,30.563913 l 28.284272,-28.284272"})]}),m=e=>(0,a.jsx)("svg",{className:e.className,xmlns:"http://www.w3.org/2000/svg",fill:"none",height:"24",width:"24",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}),h=e=>(0,a.jsx)("svg",{className:e.className,height:24,width:24,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})}),g=e=>(0,a.jsx)("svg",{className:e.className,height:24,width:24,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})})},4732:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var a=n(7437),s=n(1439),r=n(2265),l=n(6540),o=n(2746),i=n(9449);async function c(e){return new Promise((t,n)=>{let a=new FileReader;a.readAsDataURL(e),a.onloadend=()=>{var e;t((null===(e=a.result)||void 0===e?void 0:e.toString().split(",")[1])||"")},a.onerror=n})}var d=n(7693),u=n(4865),m=n(703),h=e=>{let{avatar:t,status:n,setStatus:s}=e,r=(0,i.L)(e=>e.currentAvatar),l=(0,i.L)(e=>e.setCurrentAvatar),o=async e=>{if(e.target.files){console.log("e",e.target.files[0]);let t=await c(e.target.files[0]);console.log("avatarUrl",t),l(t),e.target.files=null,e.target.value="",s("edited")}};return(0,a.jsx)("div",{className:"w-fit h-full p-[5px] bg-black rounded",children:(0,a.jsxs)("div",{className:"relative text-title aspect-square sm:w-[250px] rounded sm:min-w-[250px] w-full h-full",children:[t||r?(0,a.jsx)(m.default,{src:r?"data:image/jpeg;base64,".concat(r):null!=t?t:"",sizes:"(max-width: 640px) 100vw,250px",quality:100,priority:!0,rel:"preload",loading:"eager",alt:"thumbnail",fill:!0,className:"object-cover rounded"}):(0,a.jsx)(d.Z,{}),"idle"!==n&&(0,a.jsx)("label",{htmlFor:"upload-avatar",className:"absolute top-2 right-2 cursor-pointer",children:(0,a.jsx)(u.Z,{className:"h-6 w-6 "})}),(0,a.jsx)("input",{onChange:o,type:"file",className:"hidden",id:"upload-avatar",accept:"image/*"})]})})};let g=new Map([["male","Nam"],["female","Nữ"],["other","Kh\xe1c"],["unknown","B\xed mật"]]);var p=n(9539),x=n.n(p),f=e=>{var t;let{user:n,status:s,setStatus:r,viewedMovie:l}=e;return(0,a.jsxs)("div",{className:"w-full text-[#ccc] ml-[10px]",children:[(0,a.jsx)(v,{label:"Email",value:null==n?void 0:n.email}),(0,a.jsx)(w,{name:null!==(t=null==n?void 0:n.name)&&void 0!==t?t:"",status:s,setStatus:r}),(0,a.jsx)(v,{label:"Ng\xe0y tham gia",value:x()(null==n?void 0:n.createdAt).format("DD/MM/YYYY")}),(0,a.jsx)(y,{userGender:null==n?void 0:n.gender,status:s,setStatus:r}),(0,a.jsx)(v,{label:"Số phim đ\xe3 xem",value:l||0})]})};let v=e=>{let{label:t,value:n}=e;return(0,a.jsxs)("div",{className:"flex w-full p-4 border-b border-secondary",children:[(0,a.jsx)("span",{className:"font-bold w-[120px]",children:t}),(0,a.jsx)("span",{className:"flex-1 text-center font-medium",children:n})]})},w=e=>{let{name:t,status:n,setStatus:s}=e;return(0,a.jsxs)("div",{className:"flex items-center w-full px-4 py-3.5 border-b border-secondary",children:[(0,a.jsx)("span",{className:"font-bold w-[120px]",children:"Họ T\xean"}),(0,a.jsx)("div",{className:"flex-1 flex justify-center gap-[5px] font-medium",children:"idle"===n?t:(0,a.jsx)("input",{id:"userEditName",onChange:()=>s("edited"),maxLength:30,className:"bg-white text-dark4 px-2 outline-none",defaultValue:t})})]})},y=e=>{var t;let{userGender:n,status:s,setStatus:r}=e;return(0,a.jsxs)("div",{className:"flex w-full p-4 border-b border-secondary",children:[(0,a.jsx)("span",{className:"font-bold w-[120px]",children:"Giới t\xednh"}),(0,a.jsx)("span",{className:"flex-1 text-center font-medium",children:"idle"===s?null!==(t=g.get(null!=n?n:""))&&void 0!==t?t:"":(0,a.jsx)("div",{className:"flex w-fit gap-1 items-center mx-auto",children:["male","female","other","unknown"].map(e=>{var t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{id:"gender-".concat(e),className:"cursor-pointer accent-mainColor",defaultChecked:n===e,type:"radio",value:e,name:"gender",onClick:()=>r("edited")},"input-".concat(e)),(0,a.jsx)("label",{htmlFor:"gender-".concat(e),className:"mr-2 cursor-pointer accent-mainColor",children:null!==(t=g.get(e))&&void 0!==t?t:" Kh\xe1c"},"label-".concat(e))]})})})})]})};var C=n(3916),b=n(3107);class j{}async function k(e,t){return await j.updateUser(e,t)}j.updateUser=async(e,t)=>{let n="".concat(C.v,"/users/update"),a=new AbortController;console.log("payload",t);try{return await (0,b.Z)({url:n,method:"put",headers:{Authorization:"Bearer ".concat(e.accessToken),"Content-Type":"application/json"},data:t,withCredentials:!0,signal:a.signal})}catch(e){return e.response}};var N=n(8009),M=n(1270),L=n(2670),Z=n(248),P=n(1065),S=n(9638),A=n(6431);let B=(0,r.createContext)({});function z(e){let{children:t,onRequestClose:n}=e,[s,l]=(0,r.useState)(!1);return(0,a.jsx)(B.Provider,{value:{open:s,openModal:()=>l(!0),closeModal:()=>{l(!1),null==n||n()}},children:t})}function T(e){let{icon:t}=e,{closeModal:n}=(0,r.useContext)(B);return t?(0,a.jsx)("button",{type:"button",className:"absolute right-[24px] focus:outline-none focus-visible:outline-none",onClick:n,children:t}):(0,a.jsx)("button",{className:"absolute right-[8px] top-[8px] z-50 h-[32px] w-[32px] rounded-full bg-[rgba(0,0,0,0.45)] p-[8px] tablet:right-4  tablet:top-4  ",onClick:n,type:"button",children:(0,a.jsx)("svg",{className:"h-[16px] w-[16px] ",width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M32.1351 30.3656C32.2512 30.4817 32.3433 30.6196 32.4062 30.7713C32.469 30.9231 32.5014 31.0857 32.5014 31.25C32.5014 31.4142 32.469 31.5768 32.4062 31.7286C32.3433 31.8803 32.2512 32.0182 32.1351 32.1343C32.0189 32.2505 31.8811 32.3426 31.7293 32.4055C31.5776 32.4683 31.4149 32.5007 31.2507 32.5007C31.0865 32.5007 30.9238 32.4683 30.7721 32.4055C30.6203 32.3426 30.4825 32.2505 30.3663 32.1343L20.0007 21.7671L9.63507 32.1343C9.40052 32.3689 9.0824 32.5007 8.75069 32.5007C8.41899 32.5007 8.10087 32.3689 7.86632 32.1343C7.63177 31.8998 7.5 31.5817 7.5 31.25C7.5 30.9183 7.63177 30.6001 7.86632 30.3656L18.2335 20L7.86632 9.63434C7.63177 9.39979 7.5 9.08167 7.5 8.74996C7.5 8.41826 7.63177 8.10014 7.86632 7.86559C8.10087 7.63104 8.41899 7.49927 8.75069 7.49927C9.0824 7.49927 9.40052 7.63104 9.63507 7.86559L20.0007 18.2328L30.3663 7.86559C30.6009 7.63104 30.919 7.49927 31.2507 7.49927C31.5824 7.49927 31.9005 7.63104 32.1351 7.86559C32.3696 8.10014 32.5014 8.41826 32.5014 8.74996C32.5014 9.08167 32.3696 9.39979 32.1351 9.63434L21.7679 20L32.1351 30.3656Z",fill:"white"})})})}z.Open=function(e){let{children:t,onCallBack:n}=e,{openModal:s}=(0,r.useContext)(B);return(0,a.jsx)(a.Fragment,{children:(0,r.cloneElement)(t,{onClick:()=>{s(),null==n||n()}})})},z.Content=(0,r.forwardRef)(function(e,t){let{children:n,className:s,modalClassName:l,icon:o,disableOutsideClick:i=!1}=e,{open:c,closeModal:d}=(0,r.useContext)(B);return((0,r.useEffect)(()=>(document.body.style.width=c?"100vw":"auto",c&&"unset"!==document.body.style.overflow?document.body.classList.add("add-padding-when-open-popup"):document.body.classList.remove("add-padding-when-open-popup"),()=>{document.body.style.overflow="unset",document.body.classList.remove("add-padding-when-open-popup")}),[c]),c)?(0,a.jsx)(S.u,{appear:!0,show:c,as:r.Fragment,children:(0,a.jsxs)(A.Vq,{as:"div",className:"relative z-[100]",static:!0,onClose:()=>i?null:d(),children:[(0,a.jsx)(S.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black/25"})}),(0,a.jsx)("div",{className:"fixed inset-0 w-screen overflow-y-auto",children:(0,a.jsx)("div",{className:(0,P.cn)("flex min-h-full items-center justify-center p-4 text-center",l),children:(0,a.jsx)(S.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(A.Vq.Panel,{ref:t,className:(0,P.cn)("relative aspect-square h-full w-full max-w-xl transform  bg-white  text-left align-middle shadow-xl transition-all desktop:max-w-3xl",s),children:[(0,a.jsx)(T,{icon:o}),c&&(0,a.jsxs)("div",{children:[" ",n(d)]})]})})})})]})}):null}),z.ButtonActions=function(e){let{children:t,className:n}=e;return(0,a.jsx)("div",{className:n,children:t})};var H=n(3161);let V=e=>{let{label:t,name:n,control:s,type:r="text",error:l,className:o}=e;return(0,a.jsxs)("div",{className:(0,P.cn)("flex ",o),children:[(0,a.jsx)("label",{className:"block text-sm font-medium w-40 text-default",children:t}),(0,a.jsx)(L.Qr,{name:n,control:s,render:e=>{let{field:t}=e;return(0,a.jsx)("input",{...t,className:(0,P.cn)(" bg-dark4 max-h-[36px]  outline-none w-full  px-3 py-2",{"border border-red-500":l}),type:r})}})]})};var F=n(4333);let E=Z.z.object({oldPassword:Z.z.string({message:"Mật khẩu cũ kh\xf4ng được để trống"}).trim().min(1,{message:"Mật khẩu cũ kh\xf4ng được để trống"}),newPassword:Z.z.string({message:"Mật khẩu mới kh\xf4ng được để trống"}).trim().min(1,{message:"Mật khẩu mới kh\xf4ng được để trống"}).min(6,{message:"Mật khẩu mới phải c\xf3 \xedt nhất 6 k\xfd tự"}).max(25,{message:"Mật khẩu qu\xe1 d\xe0i"}).regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{6,}$/,{message:"Mật khẩu phải c\xf3 \xedt nhất 1 chữ thường, 1 chữ hoa v\xe0 1 số bất kỳ"}),confirmPassword:Z.z.string({message:"X\xe1c nhận mật khẩu kh\xf4ng được để trống"}).trim().min(1,{message:"X\xe1c nhận mật khẩu kh\xf4ng được để trống"})}).superRefine((e,t)=>{e.oldPassword===e.newPassword&&t.addIssue({code:Z.z.ZodIssueCode.custom,message:"Mật khẩu mới kh\xf4ng được giống với mật khẩu cũ",path:["newPassword"]}),e.newPassword!==e.confirmPassword&&t.addIssue({code:Z.z.ZodIssueCode.custom,message:"Mật khẩu mới kh\xf4ng tr\xf9ng khớp",path:["confirmPassword"]})}),R=[{label:"Mật khẩu cũ",name:"oldPassword"},{label:"Mật khẩu mới",name:"newPassword"},{label:"X\xe1c nhận mật khẩu mới",name:"confirmPassword"}];function q(e){let{user:t}=e,[n,s]=r.useState(!1),{control:l,formState:{errors:o},handleSubmit:i,reset:c,setError:d,clearErrors:u}=(0,L.cI)({resolver:(0,M.F)(E)});(0,r.useRef)(null);let m=async(e,n)=>{s(!0);try{console.log("onSubmit",e);let a=await (0,F.Cp)(t,e.oldPassword,e.newPassword);switch(console.log("Res",a),a.status){case 401:d("oldPassword",{message:"Mật khẩu cũ kh\xf4ng đ\xfang"});break;case 200:N.default.success("Đổi mật khẩu th\xe0nh c\xf4ng"),c(),n&&n()}}catch(e){N.default.error("Đ\xe3 xảy ra lỗi, vui l\xf2ng thử lại")}finally{s(!1)}};return(0,a.jsxs)(z,{onRequestClose:()=>{u(),c()},children:[(0,a.jsx)(z.Open,{children:(0,a.jsx)("button",{className:"py-1 self-start h-9 font-bold text-[#111827] rounded-md flex items-center justify-center gap-2 sm:w-[200px] w-[130px] bg-[#ffce4f]/90 hover:bg-[#ffce4f]",children:"Đổi mật khẩu"})}),(0,a.jsx)(z.Content,{className:" aspect-auto w-[500px]  rounded-2xl bg-cardBackground p-10 py-12 text-default",icon:(0,a.jsx)(a.Fragment,{}),children:e=>{var t,s,r;return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h2",{className:"text-2xl font-medium",children:"Đổi Mật Khẩu"}),(0,a.jsxs)("form",{onSubmit:i(t=>m(t,e)),className:"  text-sm  text-default",children:[(0,a.jsx)("div",{className:"flex flex-col gap-3",children:R.map(e=>(0,a.jsx)(V,{type:"password",control:l,label:e.label,name:e.name},e.name))}),(0,a.jsx)("div",{className:"text-red-500 text-xs min-h-6 h-fit flex gap-1 items-center",children:Object.keys(o).length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H.Pz,{className:"h-4 w-4"}),(0,a.jsx)("p",{className:"leading-[10px]",children:(null==o?void 0:null===(t=o.oldPassword)||void 0===t?void 0:t.message)||(null==o?void 0:null===(s=o.newPassword)||void 0===s?void 0:s.message)||(null==o?void 0:null===(r=o.confirmPassword)||void 0===r?void 0:r.message)||""})]})}),(0,a.jsx)("div",{className:" ml-auto max-w-[200px]",children:n?(0,a.jsx)("div",{className:"loadingText cursor-wait text-center bg-mainColor/90  w-full p-2 text-sm text-des uppercase font-bold tracking-wider"}):(0,a.jsx)("button",{type:"submit",disabled:n,className:"bg-mainColor/90  w-full p-2 text-sm text-des uppercase font-bold tracking-wider hover:text-black hover:bg-mainColor",children:"Đổi mật khẩu"})})]})]})}})]})}var _=e=>{let{status:t,setStatus:n}=e,[l,o]=(0,r.useState)(!1),c=(0,s.t)(e=>e.user),d=(0,s.t)(e=>e.setUser),u=(0,i.L)(e=>e.currentAvatar),m=(0,i.L)(e=>e.setCurrentAvatar),h=async()=>{o(!0);try{if(!(null==c?void 0:c._id))return;let e=document.querySelector("#userEditName").value,t=document.querySelector("input[name=gender]:checked").value,a={name:e,gender:t,userId:c._id,avatar:u},s=await k(c,a);200===s.status?(n("idle"),N.default.success("Cập nhật th\xf4ng tin th\xe0nh c\xf4ng"),d(s.data),m(null)):N.default.error("Cập nhật th\xf4ng tin thất bại")}catch(e){console.log(e)}finally{o(!1)}};return(0,a.jsxs)("div",{className:"w-full gap-4 flex",children:[c&&(0,a.jsx)(q,{user:c}),(0,a.jsx)("button",{onClick:()=>n("idle"),className:"py-1 h-9 font-bold text-default rounded-md flex items-center justify-center gap-2 w-fit  bg-cardBackground  ".concat("idle"===t?"hidden":"block ml-auto"),children:"Trở lại"}),(0,a.jsx)("button",{disabled:"editing"===t||l,className:"py-1 disabled:bg-mainColor/50  h-9 font-bold text-[#111827] rounded-md flex items-center justify-center gap-2 sm:w-[200px] w-[130px] bg-[#ffce4f]/90 hover:bg-[#ffce4f] ".concat("idle"===t?"hidden":"block "),onClick:h,children:l?(0,a.jsx)("div",{className:"loadingText"}):"Cập nhật"}),(0,a.jsx)("button",{onClick:()=>n("editing"),className:"py-1 h-9 font-bold text-[#111827] rounded-md flex items-center justify-center gap-2 sm:w-[200px] w-[130px] bg-[#ffce4f]/90 hover:bg-[#ffce4f] ".concat("idle"!==t?"hidden":"block ml-auto"),children:"Chỉnh sữa"})]})},O=()=>{var e,t,n;let[i,c]=r.useState("idle"),d=(0,s.t)(e=>e.user),{data:u,isFetching:m}=(0,l.a)({queryKey:["viewed-movie",null==d?void 0:d._id],queryFn:async()=>{var e;return(0,o.Rv)(null!==(e=null==d?void 0:d._id)&&void 0!==e?e:"")},refetchOnWindowFocus:!1,enabled:(null!==(t=null==d?void 0:null===(e=d._id)||void 0===e?void 0:e.length)&&void 0!==t?t:0)>0});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"w-full text-sm rounded overflow-hidden",children:[(0,a.jsx)("h1",{className:"p-3 bg-cardBackground text-base text-center text-[#cccccc] font-bold uppercase",children:"Th\xf4ng tin c\xe1 nh\xe2n"}),(0,a.jsxs)("div",{className:"flex h-full flex-col sm:flex-row p-[10px] bg-[#191919] items-start",children:[(0,a.jsx)(h,{setStatus:c,avatar:null==d?void 0:d.avatar,status:i}),(0,a.jsx)(f,{user:d,status:i,setStatus:c,viewedMovie:null!==(n=null==u?void 0:u.movies)&&void 0!==n?n:0})]})]}),(0,a.jsx)(_,{status:i,setStatus:c})]})}},2758:function(e,t,n){"use strict";n.r(t);var a=n(7437);n(2265),t.default=()=>(0,a.jsxs)("div",{className:"w-full text-sm rounded overflow-hidden",children:[(0,a.jsx)("h1",{className:"p-3 bg-cardBackground text-base text-center text-[#cccccc] font-bold uppercase ",children:"Th\xf4ng tin c\xe1 nh\xe2n"}),(0,a.jsxs)("div",{className:"flex h-full flex-col sm:flex-row p-[10px] bg-[#191919] items-start  ",children:[(0,a.jsx)("div",{className:"w-fit h-full p-[5px] animate-pulse    bg-cardBackground rounded",children:(0,a.jsx)("div",{className:"relative aspect-square sm:w-[250px] rounded sm:min-w-[250px] w-full h-full "})}),(0,a.jsxs)("div",{className:"w-full text-[#ccc] ml-[10px] ",children:[(0,a.jsxs)("div",{className:"flex w-full p-4 border-b border-secondary",children:[(0,a.jsx)("span",{className:"font-bold w-[120px] ",children:"Email"}),(0,a.jsx)("span",{className:"flex-1 text-center font-medium bg animate-pulse    bg-cardBackground "})]}),(0,a.jsxs)("div",{className:"flex w-full p-4 border-b border-secondary",children:[(0,a.jsx)("span",{className:"font-bold w-[120px] ",children:"Họ T\xean"}),(0,a.jsx)("span",{className:"flex-1 text-center font-medium bg animate-pulse    bg-cardBackground "})]}),(0,a.jsxs)("div",{className:"flex w-full p-4 border-b border-secondary",children:[(0,a.jsx)("span",{className:"font-bold w-[120px]",children:"Ng\xe0y tham gia"}),(0,a.jsx)("span",{className:"flex-1 text-center font-medium bg animate-pulse    bg-cardBackground "})]}),(0,a.jsxs)("div",{className:"flex w-full p-4 border-b border-secondary",children:[(0,a.jsx)("span",{className:"font-bold w-[120px]",children:"Giới t\xednh"}),(0,a.jsx)("span",{className:"flex-1 text-center font-medium bg animate-pulse    bg-cardBackground "})]}),(0,a.jsxs)("div",{className:"flex w-full p-4 ",children:[(0,a.jsx)("span",{className:"font-bold w-[120px]",children:"Số phim đ\xe3 xem"}),(0,a.jsx)("span",{className:"flex-1 text-center font-medium bg animate-pulse    bg-cardBackground "})]})]})]})]})},1065:function(e,t,n){"use strict";n.d(t,{cn:function(){return r}});var a=n(3167),s=n(1367);let r=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,a.Z)(...t))}},3916:function(e,t,n){"use strict";n.d(t,{Z:function(){return s},v:function(){return a}});let a="https://kmovie-api.vercel.app",s="https://ophim1.com/phim/"},4333:function(e,t,n){"use strict";n.d(t,{m3:function(){return l},dA:function(){return u},Mo:function(){return o},k9:function(){return m},Cp:function(){return c},g$:function(){return d},c0:function(){return i}});var a=n(3916),s=n(3107);class r{}async function l(e,t){return await r.Login(e,t)}async function o(e,t){return await r.SignUp(e,t)}async function i(e,t,n){return await r.ResetPassword(e,t,n)}async function c(e,t,n){return await r.changePassword(e,t,n)}async function d(){return await r.RefreshToken()}async function u(e){return await r.SendOTP(e)}async function m(e,t){return await r.VerifyOTP(e,t)}r.Login=async(e,t)=>{let n="".concat(a.v,"/users/login"),r=new AbortController;try{return await (0,s.Z)({url:n,method:"post",data:{email:e,password:t},withCredentials:!0,signal:r.signal})}catch(e){return e.response}},r.SignUp=async(e,t)=>{let n="".concat(a.v,"/users/create"),r=new AbortController;try{return await (0,s.Z)({url:n,method:"post",data:{email:e,password:t},withCredentials:!0,signal:r.signal})}catch(e){return e.response}},r.ResetPassword=async(e,t,n)=>{let r="".concat(a.v,"/users/resetPassword"),l=new AbortController;try{return await (0,s.Z)({url:r,method:"post",data:{email:e,password:t,token:n},withCredentials:!0,signal:l.signal})}catch(e){return e.response}},r.changePassword=async(e,t,n)=>{let r="".concat(a.v,"/users/changePassword"),l={userId:e._id,email:e.email,oldPassword:t,newPassword:n},o=new AbortController;try{return await (0,s.Z)({url:r,method:"put",headers:{Authorization:"Bearer ".concat(e.accessToken)},data:l,withCredentials:!0,signal:o.signal})}catch(e){return e.response}},r.RefreshToken=async()=>{let e="".concat(a.v,"/users/refreshToken"),t=new AbortController;try{return(await (0,s.Z)({url:e,method:"post",withCredentials:!0,signal:t.signal})).data}catch(e){console.log(e)}},r.SendOTP=async e=>{let t="".concat(a.v,"/otp/sendOTP"),n=new AbortController;try{return await (0,s.Z)({url:t,method:"get",params:{email:e},withCredentials:!0,signal:n.signal})}catch(e){return e.response}},r.VerifyOTP=async(e,t)=>{let n="".concat(a.v,"/otp/verifyOTP"),r=new AbortController;try{return await (0,s.Z)({url:n,method:"get",params:{email:e,otp:t},withCredentials:!0,signal:r.signal})}catch(e){return e.response}}},2746:function(e,t,n){"use strict";n.d(t,{nm:function(){return d},b:function(){return c},_4:function(){return u},yx:function(){return i},Rv:function(){return m},ez:function(){return o}});var a=n(2265),s=n(3107),r=n(3916);class l{}async function o(e,t){return 0===e.length?null:await l.searchKMovie(e,t)}async function i(e,t,n){return await l.getMovieBySlugArray(e,t,n)}async function c(e,t){return e&&0!==e.length?await l.getEpisodeHistory(e,t):null}async function d(e,t,n){return await l.addEpisodeHistory(e,t,n)}async function u(e,t,n){return n&&0!==n.length?await l.getHistoryKMovie(e,t,n):null}async function m(e){return e&&(null==e?void 0:e.length)!==0?await l.getViewedMovie(e):null}l.searchKMovie=(0,a.cache)(async(e,t)=>{let n="".concat(r.v,"/movies/Search");try{return(await (0,s.Z)({method:"get",url:n,params:{value:e,limit:t}})).data}catch(e){console.log(e)}}),l.getKMovie=(0,a.cache)(async(e,t,n)=>{let a=r.v+"/movies";try{return(await (0,s.Z)({method:"get",url:a,params:{page:e,pageSize:t,search:null!=n?n:""}})).data}catch(e){console.log(e)}}),l.getMovieBySlug=(0,a.cache)(async e=>{let t=r.Z+e;try{return(await (0,s.Z)({method:"get",url:t})).data}catch(e){console.log(e)}}),l.getFilterMovie=(0,a.cache)(async(e,t,n,a,l,o,i,c)=>{var d;let u={page:e,pageSize:t,sort:null!=n?n:null,type:null!=a?a:null,status:null!=i?i:null,year:null!=l?l:null,categories:null!==(d=null==o?void 0:o.split(" "))&&void 0!==d?d:null,country:null!=c?c:null},m=r.v+"/movies/FilterMovie";try{return(await (0,s.Z)({method:"get",url:m,params:u})).data}catch(e){console.log(e)}}),l.getCountryMovies=(0,a.cache)(async(e,t,n)=>{let a=r.v+"/movies/Country";try{return(await (0,s.Z)({method:"get",url:a,params:{page:e,pageSize:t,country:n}})).data}catch(e){console.log("error",e);return}}),l.getCategoryMovies=(0,a.cache)(async(e,t,n)=>{let a=r.v+"/movies/Category";try{return(await (0,s.Z)({method:"get",url:a,params:{page:e,pageSize:t,category:n}})).data}catch(e){console.log("error",e);return}}),l.getYearMovies=(0,a.cache)(async(e,t,n)=>{let a=r.v+"/movies/Year";try{return(await (0,s.Z)({method:"get",url:a,params:{page:e,pageSize:t,year:n}})).data}catch(e){console.log("error",e);return}}),l.getMovieBySlugArray=(0,a.cache)(async(e,t,n)=>{let a=r.v+"/movies/getMoviesBySlug";try{return(await (0,s.Z)({method:"get",url:a,params:{page:e,pageSize:t,slugs:n}})).data}catch(e){console.log("error",e);return}}),l.getEpisodeHistory=async(e,t)=>{let n=r.v+"/history/getEpisodeHistory";try{return(await (0,s.Z)({method:"get",url:n,params:{userId:e,movieSlug:t}})).data}catch(e){console.log("error",e);return}},l.addEpisodeHistory=async(e,t,n)=>{let a=r.v+"/history/addEpisodeHistory";try{return(await (0,s.Z)({method:"post",url:a,data:{userId:e,movieSlug:t,episodeSlug:n}})).data}catch(e){console.log("error",e);return}},l.getHistoryKMovie=async(e,t,n)=>{let a=r.v+"/history/getHistory";try{return(await (0,s.Z)({method:"get",url:a,params:{page:e,pageSize:t,userId:n}})).data}catch(e){console.log("error",e);return}},l.getViewedMovie=async e=>{let t=r.v+"/history/getViewedMovie";try{return(await (0,s.Z)({method:"get",url:t,params:{userId:e}})).data}catch(e){console.log("error",e);return}}},1439:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var a=n(5249),s=n(7966);let r=(0,n(2020).Ue)()((0,a.tJ)((0,s.n)(e=>({user:null,setUser:t=>e(()=>({user:t})),updateUserToken:t=>e(e=>(null===e.user||(e.user.accessToken=t),e))})),{name:"auth",partialize:e=>({user:e.user})}))},9449:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var a=n(5249),s=n(7966);let r=(0,n(2020).Ue)()((0,a.tJ)((0,s.n)(e=>({currentAvatar:null,setCurrentAvatar:t=>e(()=>({currentAvatar:t})),bookmarks:[],setBookmark:t=>e(()=>({bookmarks:t}))})),{name:"user",partialize:e=>({bookmarks:e.bookmarks})}))}},function(e){e.O(0,[576,9,485,107,3,618,540,337,827,131,971,69,744],function(){return e(e.s=6049)}),_N_E=e.O()}]);