(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[117],{4875:function(e,t,r){Promise.resolve().then(r.t.bind(r,1749,23)),Promise.resolve().then(r.bind(r,5688)),Promise.resolve().then(r.bind(r,3685)),Promise.resolve().then(r.bind(r,8985)),Promise.resolve().then(r.bind(r,2420)),Promise.resolve().then(r.bind(r,1021))},3685:function(e,t,r){"use strict";r.r(t);var n=r(7437),o=r(2265),a=r(3161),s=r(1065),i=r(2746),l=r(1439);t.default=e=>{let{episode:t,movieSlug:r}=e,[u,c]=(0,o.useState)(!0),d=(0,l.t)(e=>e.user);return(0,o.useEffect)(()=>{(null==d?void 0:d._id)&&(async()=>{await (0,i.nm)(null==d?void 0:d._id,r,t.slug)})()},[null==d?void 0:d._id]),(0,n.jsxs)("div",{className:"relative h-[200px] sm:h-[100svh] w-full",children:[(0,n.jsx)("div",{className:(0,s.cn)("w-full pointer-events-none transition-opacity duration-100 absolute top-0 left-0  h-full bg-black  flex items-center justify-center  ",{"opacity-0":!u,"opacity-100":u}),children:(0,n.jsx)(a.Ho,{className:"sm:h-10 sm:w-10 h-8 w-8 "})}),(0,n.jsx)("iframe",{onLoadedData:()=>console.log("onLoadedData"),onLoad:()=>c(!1),onPlay:()=>console.log("onPlay"),title:"Movies",allowFullScreen:!0,style:{display:u?"none":"block"},className:"w-full h-[200px]  sm:h-[100svh]",src:t.link_embed})]})}},8985:function(e,t,r){"use strict";r.r(t);var n=r(7437),o=r(1065),a=r(1021),s=r(2746),i=r(1439),l=r(6540);r(2265),t.default=e=>{var t,r;let{slug:u,episodes:c,currentEpisode:d}=e,g=(0,i.t)(e=>e.user),{data:v,isFetching:h}=(0,l.a)({queryKey:["viewed-movie",null==g?void 0:g._id],queryFn:async()=>{var e;return(0,s.b)(null!==(e=null==g?void 0:g._id)&&void 0!==e?e:"",u)},refetchOnWindowFocus:!1,enabled:(null!==(r=null==g?void 0:null===(t=g._id)||void 0===t?void 0:t.length)&&void 0!==r?r:0)>0});return(0,n.jsxs)("div",{className:"w-full p-3 space-y-2 text-default  bg-des rounded",children:[(0,n.jsx)("h3",{className:"font-semibold ",children:"Danh s\xe1ch táº­p phim"}),(0,n.jsx)("div",{className:" text-sm overflow-auto items-start flex flex-wrap ",children:c.map((e,t)=>{var r;return(0,n.jsx)(a.Link,{href:"/phim/".concat(u,"/tap-").concat("kep"===e.slug?e.slug:t+1),className:(0,o.cn)("hover:bg-mainColor/90 hover:border-[#4A4A4A] hover:text-black  py-1 text-center w-[45px] bg-[#333232] border border-[#4e4e4e]",{"bg-black/80":null==v?void 0:null===(r=v.episodes)||void 0===r?void 0:r.includes(e.slug),"bg-mainColor text-black":d===e.slug}),children:["full","trailer"].includes(e.slug)?e.slug:t+1},e.slug+t)})})]})}},2420:function(e,t,r){"use strict";r.r(t);var n=r(7437),o=r(1065),a=r(1674),s=r(2265);t.default=e=>{let{servers:t}=e,[r,i]=s.useState(t[0].server_name);return(0,n.jsx)("div",{className:"my-[10px] mb-[20px] flex gap-[10px] justify-center",children:t.map((e,t)=>(0,n.jsx)(a.z,{onClick:()=>i(e.server_name),className:(0,o.cn)(e.server_name===r?"text-black":"text-default"," hover:opacity-100 opacity-90 text-sm px-3 font-bold h-9 rounded bg-[#ffce4f]"),children:e.server_name},t))})}},3916:function(e,t,r){"use strict";r.d(t,{Z:function(){return o},v:function(){return n}});let n="https://kmovie-api.vercel.app",o="https://ophim1.com/phim/"},2746:function(e,t,r){"use strict";r.d(t,{nm:function(){return c},b:function(){return u},_4:function(){return d},yx:function(){return l},Rv:function(){return g},ez:function(){return i}});var n=r(2265),o=r(3107),a=r(3916);class s{}async function i(e,t){return 0===e.length?null:await s.searchKMovie(e,t)}async function l(e,t,r){return await s.getMovieBySlugArray(e,t,r)}async function u(e,t){return e&&0!==e.length?await s.getEpisodeHistory(e,t):null}async function c(e,t,r){return await s.addEpisodeHistory(e,t,r)}async function d(e,t,r){return r&&0!==r.length?await s.getHistoryKMovie(e,t,r):null}async function g(e){return e&&(null==e?void 0:e.length)!==0?await s.getViewedMovie(e):null}s.searchKMovie=(0,n.cache)(async(e,t)=>{let r="".concat(a.v,"/movies/Search");try{return(await (0,o.Z)({method:"get",url:r,params:{value:e,limit:t}})).data}catch(e){console.log(e)}}),s.getKMovie=(0,n.cache)(async(e,t,r)=>{let n=a.v+"/movies";try{return(await (0,o.Z)({method:"get",url:n,params:{page:e,pageSize:t,search:null!=r?r:""}})).data}catch(e){console.log(e)}}),s.getMovieBySlug=(0,n.cache)(async e=>{let t=a.Z+e;try{return(await (0,o.Z)({method:"get",url:t})).data}catch(e){console.log(e)}}),s.getFilterMovie=(0,n.cache)(async(e,t,r,n,s,i,l,u)=>{var c;let d={page:e,pageSize:t,sort:null!=r?r:null,type:null!=n?n:null,status:null!=l?l:null,year:null!=s?s:null,categories:null!==(c=null==i?void 0:i.split(" "))&&void 0!==c?c:null,country:null!=u?u:null},g=a.v+"/movies/FilterMovie";try{return(await (0,o.Z)({method:"get",url:g,params:d})).data}catch(e){console.log(e)}}),s.getCountryMovies=(0,n.cache)(async(e,t,r)=>{let n=a.v+"/movies/Country";try{return(await (0,o.Z)({method:"get",url:n,params:{page:e,pageSize:t,country:r}})).data}catch(e){console.log("error",e);return}}),s.getCategoryMovies=(0,n.cache)(async(e,t,r)=>{let n=a.v+"/movies/Category";try{return(await (0,o.Z)({method:"get",url:n,params:{page:e,pageSize:t,category:r}})).data}catch(e){console.log("error",e);return}}),s.getYearMovies=(0,n.cache)(async(e,t,r)=>{let n=a.v+"/movies/Year";try{return(await (0,o.Z)({method:"get",url:n,params:{page:e,pageSize:t,year:r}})).data}catch(e){console.log("error",e);return}}),s.getMovieBySlugArray=(0,n.cache)(async(e,t,r)=>{let n=a.v+"/movies/getMoviesBySlug";try{return(await (0,o.Z)({method:"get",url:n,params:{page:e,pageSize:t,slugs:r}})).data}catch(e){console.log("error",e);return}}),s.getEpisodeHistory=async(e,t)=>{let r=a.v+"/history/getEpisodeHistory";try{return(await (0,o.Z)({method:"get",url:r,params:{userId:e,movieSlug:t}})).data}catch(e){console.log("error",e);return}},s.addEpisodeHistory=async(e,t,r)=>{let n=a.v+"/history/addEpisodeHistory";try{return(await (0,o.Z)({method:"post",url:n,data:{userId:e,movieSlug:t,episodeSlug:r}})).data}catch(e){console.log("error",e);return}},s.getHistoryKMovie=async(e,t,r)=>{let n=a.v+"/history/getHistory";try{return(await (0,o.Z)({method:"get",url:n,params:{page:e,pageSize:t,userId:r}})).data}catch(e){console.log("error",e);return}},s.getViewedMovie=async e=>{let t=a.v+"/history/getViewedMovie";try{return(await (0,o.Z)({method:"get",url:t,params:{userId:e}})).data}catch(e){console.log("error",e);return}}},1439:function(e,t,r){"use strict";r.d(t,{t:function(){return a}});var n=r(5249),o=r(7966);let a=(0,r(2020).Ue)()((0,n.tJ)((0,o.n)(e=>({user:null,setUser:t=>e(()=>({user:t})),updateUserToken:t=>e(e=>(null===e.user||(e.user.accessToken=t),e))})),{name:"auth",partialize:e=>({user:e.user})}))},5688:function(e,t,r){"use strict";r.r(t),t.default={src:"/_next/static/media/Icon_light.bc49ad58.png",height:303,width:310,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAV1BMVEX+9gD+zk7+zU/+zU7+zk7+zU/+zU7+zU/+zU7+zU/+zk7+zU/+zU7+zU/+zU/+zU7+zU7+zU/+zU7+zU/+zU7+zU/+zU7+zU7+zU/+zU/+zU/+zU7+zU6FFo88AAAAHXRSTlMAAAAAAQEBAgIDBAQECQ44T1JaX2Rmam6Dhp/B8DUeffUAAABBSURBVHjaDckHCgAxDANBS/aVXO81/39nJBAMrFEL3ci+wSQMfi3vyiQc+WEH4f6/kZUlbvO5KyEAR+0GRLTmXgBKgwIEfAsGfQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}},1674:function(e,t,r){"use strict";r.d(t,{z:function(){return u}});var n=r(4110),o=r(3700),a=r(2265),s=r(2774),i=r(3656),l=r(8318);let u=(0,l.yV)(function(e,t){var r;let u=(0,i.B)(),{disabled:c=u||!1,autoFocus:d=!1,...g}=e,{isFocusVisible:v,focusProps:h}=(0,n.F)({autoFocus:d}),{isHovered:m,hoverProps:p}=(0,o.X)({isDisabled:c}),{pressed:f,pressProps:y}=(0,s.x)({disabled:c}),A=(0,l.dG)({ref:t,type:null!=(r=g.type)?r:"button",disabled:c||void 0,autoFocus:d},h,p,y),b=(0,a.useMemo)(()=>({disabled:c,hover:m,focus:v,active:f,autofocus:d}),[c,m,v,f,d]);return(0,l.sY)({ourProps:A,theirProps:g,slot:b,defaultTag:"button",name:"Button"})})},2774:function(e,t,r){"use strict";r.d(t,{x:function(){return i}});var n=r(2265),o=r(4819),a=r(44),s=r(641);function i({disabled:e=!1}={}){let t=(0,n.useRef)(null),[r,i]=(0,n.useState)(!1),l=(0,a.G)(),u=(0,s.z)(()=>{t.current=null,i(!1),l.dispose()}),c=(0,s.z)(e=>{if(l.dispose(),null===t.current){t.current=e.currentTarget,i(!0);{let r=(0,o.r)(e.currentTarget);l.addEventListener(r,"pointerup",u,!1),l.addEventListener(r,"pointermove",e=>{if(t.current){var r,n;let o,a;i((o=e.width/2,a=e.height/2,r={top:e.clientY-a,right:e.clientX+o,bottom:e.clientY+a,left:e.clientX-o},n=t.current.getBoundingClientRect(),!(!r||!n||r.right<n.left||r.left>n.right||r.bottom<n.top||r.top>n.bottom)))}},!1),l.addEventListener(r,"pointercancel",u,!1)}}});return{pressed:r,pressProps:e?{}:{onPointerDown:c,onPointerUp:u,onClick:u}}}},44:function(e,t,r){"use strict";r.d(t,{G:function(){return a}});var n=r(2265),o=r(5205);function a(){let[e]=(0,n.useState)(o.k);return(0,n.useEffect)(()=>()=>e.dispose(),[e]),e}},5205:function(e,t,r){"use strict";r.d(t,{k:function(){return function e(){let t=[],r={addEventListener:(e,t,n,o)=>(e.addEventListener(t,n,o),r.add(()=>e.removeEventListener(t,n,o))),requestAnimationFrame(...e){let t=requestAnimationFrame(...e);return r.add(()=>cancelAnimationFrame(t))},nextFrame:(...e)=>r.requestAnimationFrame(()=>r.requestAnimationFrame(...e)),setTimeout(...e){let t=setTimeout(...e);return r.add(()=>clearTimeout(t))},microTask(...e){let t={current:!0};return(0,n.Y)(()=>{t.current&&e[0]()}),r.add(()=>{t.current=!1})},style(e,t,r){let n=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:r}),this.add(()=>{Object.assign(e.style,{[t]:n})})},group(t){let r=e();return t(r),this.add(()=>r.dispose())},add:e=>(t.includes(e)||t.push(e),()=>{let r=t.indexOf(e);if(r>=0)for(let e of t.splice(r,1))e()}),dispose(){for(let e of t.splice(0))e()}};return r}}});var n=r(1210)},1210:function(e,t,r){"use strict";function n(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch(e=>setTimeout(()=>{throw e}))}r.d(t,{Y:function(){return n}})},4819:function(e,t,r){"use strict";r.d(t,{r:function(){return o}});var n=r(1879);function o(e){return n.O.isServer?null:e instanceof Node?e.ownerDocument:null!=e&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}}},function(e){e.O(0,[576,129,485,68,107,3,618,540,122,971,69,744],function(){return e(e.s=4875)}),_N_E=e.O()}]);