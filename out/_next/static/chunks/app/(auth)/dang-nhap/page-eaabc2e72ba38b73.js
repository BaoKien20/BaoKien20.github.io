(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{6858:function(t,e,n){Promise.resolve().then(n.t.bind(n,5250,23)),Promise.resolve().then(n.bind(n,3786))},3786:function(t,e,n){"use strict";n.r(e);var r=n(7437),a=n(4333),s=n(2265),i=n(3161),o=n(1021),l=n(8009),u=n(1439);e.default=()=>{let[t,e]=s.useState(!1),[n,c]=s.useState(null),d=(0,o.useRouter)(),h=(0,u.t)(t=>t.setUser),p=async t=>{t.preventDefault(),c(null),e(!0);let n=new FormData(t.target),r=n.get("email"),s=n.get("password"),i=await (0,a.m3)(r,s);200===i.status?(h(i.data),d.push("/"),l.default.success("Đăng nhập th\xe0nh c\xf4ng",{duration:1e3})):401===i.status||404===i.status?c("Email hoặc mật khẩu kh\xf4ng đ\xfang"):c("Đ\xe3 c\xf3 lỗi xảy ra, vui l\xf2ng thử lại sau"),e(!1)};return(0,r.jsxs)("form",{onSubmit:p,className:"  text-sm  text-default p-6 w-[400px]",children:[(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)("input",{className:" bg-dark4  max-h-[36px] outline-none w-full px-3 py-2 ",name:"email",type:"text",placeholder:"Email"})}),(0,r.jsx)("div",{className:"",children:(0,r.jsx)("input",{className:" bg-dark4 max-h-[36px]  outline-none w-full  px-3 py-2",name:"password",type:"password",placeholder:"Password"})}),(0,r.jsx)("div",{className:"text-red-500 text-xs min-h-6 h-fit flex gap-1 items-center",children:n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Pz,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:n})]})}),t?(0,r.jsx)("div",{className:"loadingText cursor-wait text-center bg-mainColor/90  w-full p-2 text-sm text-des uppercase font-bold tracking-wider"}):(0,r.jsx)("button",{type:"submit",disabled:t,className:"bg-mainColor/90  w-full p-2 text-sm text-des uppercase font-bold tracking-wider cursor-pointer hover:bg-mainColor hover:text-black ",children:"Đăng nhập"})]})}},3916:function(t,e,n){"use strict";n.d(e,{Z:function(){return a},v:function(){return r}});let r="https://kmovie-api.vercel.app",a="https://ophim1.com/phim/"},4333:function(t,e,n){"use strict";n.d(e,{m3:function(){return i},dA:function(){return d},Mo:function(){return o},k9:function(){return h},Cp:function(){return u},g$:function(){return c},c0:function(){return l}});var r=n(3916),a=n(3107);class s{}async function i(t,e){return await s.Login(t,e)}async function o(t,e){return await s.SignUp(t,e)}async function l(t,e,n){return await s.ResetPassword(t,e,n)}async function u(t,e,n){return await s.changePassword(t,e,n)}async function c(){return await s.RefreshToken()}async function d(t){return await s.SendOTP(t)}async function h(t,e){return await s.VerifyOTP(t,e)}s.Login=async(t,e)=>{let n="".concat(r.v,"/users/login"),s=new AbortController;try{return await (0,a.Z)({url:n,method:"post",data:{email:t,password:e},withCredentials:!0,signal:s.signal})}catch(t){return t.response}},s.SignUp=async(t,e)=>{let n="".concat(r.v,"/users/create"),s=new AbortController;try{return await (0,a.Z)({url:n,method:"post",data:{email:t,password:e},withCredentials:!0,signal:s.signal})}catch(t){return t.response}},s.ResetPassword=async(t,e,n)=>{let s="".concat(r.v,"/users/resetPassword"),i=new AbortController;try{return await (0,a.Z)({url:s,method:"post",data:{email:t,password:e,token:n},withCredentials:!0,signal:i.signal})}catch(t){return t.response}},s.changePassword=async(t,e,n)=>{let s="".concat(r.v,"/users/changePassword"),i={userId:t._id,email:t.email,oldPassword:e,newPassword:n},o=new AbortController;try{return await (0,a.Z)({url:s,method:"put",headers:{Authorization:"Bearer ".concat(t.accessToken)},data:i,withCredentials:!0,signal:o.signal})}catch(t){return t.response}},s.RefreshToken=async()=>{let t="".concat(r.v,"/users/refreshToken"),e=new AbortController;try{return(await (0,a.Z)({url:t,method:"post",withCredentials:!0,signal:e.signal})).data}catch(t){console.log(t)}},s.SendOTP=async t=>{let e="".concat(r.v,"/otp/sendOTP"),n=new AbortController;try{return await (0,a.Z)({url:e,method:"get",params:{email:t},withCredentials:!0,signal:n.signal})}catch(t){return t.response}},s.VerifyOTP=async(t,e)=>{let n="".concat(r.v,"/otp/verifyOTP"),s=new AbortController;try{return await (0,a.Z)({url:n,method:"get",params:{email:t,otp:e},withCredentials:!0,signal:s.signal})}catch(t){return t.response}}},1439:function(t,e,n){"use strict";n.d(e,{t:function(){return s}});var r=n(5249),a=n(7966);let s=(0,n(2020).Ue)()((0,r.tJ)((0,a.n)(t=>({user:null,setUser:e=>t(()=>({user:e})),updateUserToken:e=>t(t=>(null===t.user||(t.user.accessToken=e),t))})),{name:"auth",partialize:t=>({user:t.user})}))}},function(t){t.O(0,[576,129,9,107,3,122,971,69,744],function(){return t(t.s=6858)}),_N_E=t.O()}]);