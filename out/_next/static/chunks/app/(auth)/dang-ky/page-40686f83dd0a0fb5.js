(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[942],{1870:function(e,t,n){Promise.resolve().then(n.t.bind(n,5250,23)),Promise.resolve().then(n.bind(n,9318))},9318:function(e,t,n){"use strict";n.r(t);var r=n(7437),s=n(4333),a=n(2265),o=n(2670),i=n(248),l=n(1270),c=n(3161),u=n(1021),d=n(8009),m=n(1065);t.default=()=>{var e,t,n,h;let[p,g]=a.useState(!1),w=(0,u.useRouter)(),f=i.Ry({system:i.Z_().optional(),email:i.Z_().trim().min(1,{message:"Email kh\xf4ng được để trống"}).max(40,{message:"Email qu\xe1 d\xe0i"}).email({message:"Email kh\xf4ng hợp lệ"}),password:i.Z_().trim().min(1,{message:"Mật khẩu kh\xf4ng được để trống"}).min(6,{message:"Mật khẩu phải c\xf3 \xedt nhất 6 k\xfd tự"}).max(25,{message:"Mật khẩu qu\xe1 d\xe0i"}).regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{6,}$/,{message:"Mật khẩu phải c\xf3 \xedt nhất 1 chữ thường, 1 chữ hoa v\xe0 1 số bất kỳ"}),confirmPassword:i.Z_().trim().min(1,{message:"X\xe1c nhận mật khẩu kh\xf4ng được để trống"})}).refine(e=>e.password===e.confirmPassword,{message:"Mật khẩu kh\xf4ng tr\xf9ng khớp",path:["confirmPassword"]}),{register:x,handleSubmit:v,formState:{errors:y},setError:b,reset:k}=(0,o.cI)({resolver:(0,l.F)(f)}),P=async e=>{g(!0);let t=await (0,s.Mo)(e.email,e.password);200===t.status?(k(),w.push("/dang-nhap"),d.default.success("Đăng nhập th\xe0nh c\xf4ng")):b("email",{message:t.data.message}),g(!1)};return console.log("error",y),(0,r.jsxs)("form",{onSubmit:v(e=>P(e)),className:"  text-sm  text-default p-6 w-[400px]",children:[(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)("input",{...x("email"),className:(0,m.cn)(" bg-dark4  max-h-[36px] outline-none w-full px-3 py-2 ",{"border border-red-500":y.email}),name:"email",maxLength:40,type:"text",placeholder:"Email"})}),(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)("input",{...x("password"),className:(0,m.cn)(" bg-dark4 max-h-[36px]  outline-none w-full  px-3 py-2",{"border border-red-500":y.password}),name:"password",maxLength:25,type:"password",placeholder:"Mật khẩu"})}),(0,r.jsx)("div",{className:"",children:(0,r.jsx)("input",{...x("confirmPassword"),className:(0,m.cn)(" bg-dark4 max-h-[36px]  outline-none w-full  px-3 py-2",{"border border-red-500":y.confirmPassword}),name:"confirmPassword",maxLength:25,type:"password",placeholder:"X\xe1c nhận mật khẩu"})}),(0,r.jsx)("div",{className:"text-red-500 text-xs min-h-6 h-fit flex gap-1 items-center",children:Object.keys(y).length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Pz,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:(null==y?void 0:null===(e=y.email)||void 0===e?void 0:e.message)||(null==y?void 0:null===(t=y.password)||void 0===t?void 0:t.message)||(null==y?void 0:null===(n=y.confirmPassword)||void 0===n?void 0:n.message)||(null==y?void 0:null===(h=y.system)||void 0===h?void 0:h.message)||""})]})}),p?(0,r.jsx)("div",{className:"loadingText cursor-wait text-center bg-mainColor/90  w-full p-2 text-sm text-des uppercase font-bold tracking-wider"}):(0,r.jsx)("button",{type:"submit",disabled:p,className:"bg-mainColor/90  w-full p-2 text-sm text-des uppercase font-bold tracking-wider cursor-pointer hover:bg-mainColor hover:text-black ",children:"Đăng k\xfd"})]})}},3916:function(e,t,n){"use strict";n.d(t,{Z:function(){return s},v:function(){return r}});let r="https://kmovie-api.vercel.app",s="https://ophim1.com/phim/"},4333:function(e,t,n){"use strict";n.d(t,{m3:function(){return o},dA:function(){return d},Mo:function(){return i},k9:function(){return m},Cp:function(){return c},g$:function(){return u},c0:function(){return l}});var r=n(3916),s=n(3107);class a{}async function o(e,t){return await a.Login(e,t)}async function i(e,t){return await a.SignUp(e,t)}async function l(e,t,n){return await a.ResetPassword(e,t,n)}async function c(e,t,n){return await a.changePassword(e,t,n)}async function u(){return await a.RefreshToken()}async function d(e){return await a.SendOTP(e)}async function m(e,t){return await a.VerifyOTP(e,t)}a.Login=async(e,t)=>{let n="".concat(r.v,"/users/login"),a=new AbortController;try{return await (0,s.Z)({url:n,method:"post",data:{email:e,password:t},withCredentials:!0,signal:a.signal})}catch(e){return e.response}},a.SignUp=async(e,t)=>{let n="".concat(r.v,"/users/create"),a=new AbortController;try{return await (0,s.Z)({url:n,method:"post",data:{email:e,password:t},withCredentials:!0,signal:a.signal})}catch(e){return e.response}},a.ResetPassword=async(e,t,n)=>{let a="".concat(r.v,"/users/resetPassword"),o=new AbortController;try{return await (0,s.Z)({url:a,method:"post",data:{email:e,password:t,token:n},withCredentials:!0,signal:o.signal})}catch(e){return e.response}},a.changePassword=async(e,t,n)=>{let a="".concat(r.v,"/users/changePassword"),o={userId:e._id,email:e.email,oldPassword:t,newPassword:n},i=new AbortController;try{return await (0,s.Z)({url:a,method:"put",headers:{Authorization:"Bearer ".concat(e.accessToken)},data:o,withCredentials:!0,signal:i.signal})}catch(e){return e.response}},a.RefreshToken=async()=>{let e="".concat(r.v,"/users/refreshToken"),t=new AbortController;try{return(await (0,s.Z)({url:e,method:"post",withCredentials:!0,signal:t.signal})).data}catch(e){console.log(e)}},a.SendOTP=async e=>{let t="".concat(r.v,"/otp/sendOTP"),n=new AbortController;try{return await (0,s.Z)({url:t,method:"get",params:{email:e},withCredentials:!0,signal:n.signal})}catch(e){return e.response}},a.VerifyOTP=async(e,t)=>{let n="".concat(r.v,"/otp/verifyOTP"),a=new AbortController;try{return await (0,s.Z)({url:n,method:"get",params:{email:e,otp:t},withCredentials:!0,signal:a.signal})}catch(e){return e.response}}}},function(e){e.O(0,[576,129,9,107,337,122,971,69,744],function(){return e(e.s=1870)}),_N_E=e.O()}]);